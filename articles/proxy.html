<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>stars proxy objects • stars</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="stars proxy objects">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">stars</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/blog1.html">spatiotemporal arrays for R: stars blog one</a>
    </li>
    <li>
      <a href="../articles/data_model.html">stars: data model</a>
    </li>
    <li>
      <a href="../articles/first.html">spatiotemporal tidy arrays for R; first steps</a>
    </li>
    <li>
      <a href="../articles/proxy.html">stars proxy objects</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/r-spatial/stars/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>stars proxy objects</h1>
                        <h4 class="author">Edzer Pebesma</h4>
            
            <h4 class="date">Sep 8, 2018</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/r-spatial/stars//blob/master/vignettes/proxy.Rmd"><code>vignettes/proxy.Rmd</code></a></small>
      <div class="hidden name"><code>proxy.Rmd</code></div>

    </div>

    
    
<p>When your imagery or array data easily fits a couple of times in R’s working memory (RAM), consider yourself lucky. This document was not written for you. If your imagery is too large, or for other reasons you want to work with smaller chunks of data than the files in which they come, read on about your options. First we will discuss the low-level interface for this, then the higher level, using stars proxy objects that delay all reading.</p>
<div id="preamble-the-starsdata-package" class="section level1">
<h1 class="hasAnchor">
<a href="#preamble-the-starsdata-package" class="anchor"></a>Preamble: the starsdata package</h1>
<p>To run all of the examples in in this vignette, you must install a package with datasets that are too large (1 Gb) to be held in the <code>stars</code> package. They are in a <a href="https://github.com/eddelbuettel/drat">drat repo</a>, installation is done by</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">"starsdata"</span>, <span class="dt">repos =</span> <span class="st">"http://pebesma.staff.ifgi.de"</span>, <span class="dt">type =</span> <span class="st">"source"</span>) </a></code></pre></div>
</div>
<div id="reading-chunks-change-resolution-select-bands" class="section level1">
<h1 class="hasAnchor">
<a href="#reading-chunks-change-resolution-select-bands" class="anchor"></a>Reading chunks, change resolution, select bands</h1>
<p><code>read_stars</code> has an argument called <code>RasterIO</code> which controls how a GDAL dataset is being read. By default, all pixels and all bands are read in memory. This can consume a lot of time and require a lot of memory. Remember that your file may be compressed, and that pixel values represented in the file by bytes are converted to 8-byte doubles in R.</p>
<p>The reason of using <code>RasterIO</code> for this is that the parameters we use are directly mapped to the <a href="https://www.gdal.org/classGDALDataset.html">GDAL RasterIO function</a> used (after adapting the 1-based offset index in R to 0-based offset in C++).</p>
<div id="reading-a-particular-chunk" class="section level2">
<h2 class="hasAnchor">
<a href="#reading-a-particular-chunk" class="anchor"></a>Reading a particular chunk</h2>
<p>We can read a (spatially) rectangular chunk of data by</p>
<p>An example of using <code>RasterIO</code> is</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">library</span>(stars)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">## Loading required package: abind</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">## Loading required package: sf</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">## Linking to GEOS 3.5.0, GDAL 2.2.2, PROJ 4.8.0</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">## Registered S3 method overwritten by 'dplyr':</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">##   method               from  </a>
<a class="sourceLine" id="cb2-7" data-line-number="7">##   as.data.frame.tbl_df tibble</a>
<a class="sourceLine" id="cb2-8" data-line-number="8">tif =<span class="st"> </span><span class="kw">system.file</span>(<span class="st">"tif/L7_ETMs.tif"</span>, <span class="dt">package =</span> <span class="st">"stars"</span>)</a>
<a class="sourceLine" id="cb2-9" data-line-number="9">rasterio =<span class="st"> </span><span class="kw">list</span>(<span class="dt">nXOff =</span> <span class="dv">6</span>, <span class="dt">nYOff =</span> <span class="dv">6</span>, <span class="dt">nXSize =</span> <span class="dv">100</span>, <span class="dt">nYSize =</span> <span class="dv">100</span>, <span class="dt">bands =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">4</span>))</a>
<a class="sourceLine" id="cb2-10" data-line-number="10">(<span class="dt">x =</span> <span class="kw"><a href="../reference/read_stars.html">read_stars</a></span>(tif, <span class="dt">RasterIO =</span> rasterio))</a>
<a class="sourceLine" id="cb2-11" data-line-number="11">## stars object with 3 dimensions and 1 attribute</a>
<a class="sourceLine" id="cb2-12" data-line-number="12">## attribute(s):</a>
<a class="sourceLine" id="cb2-13" data-line-number="13">##   L7_ETMs.tif    </a>
<a class="sourceLine" id="cb2-14" data-line-number="14">##  Min.   : 23.00  </a>
<a class="sourceLine" id="cb2-15" data-line-number="15">##  1st Qu.: 54.00  </a>
<a class="sourceLine" id="cb2-16" data-line-number="16">##  Median : 63.00  </a>
<a class="sourceLine" id="cb2-17" data-line-number="17">##  Mean   : 62.06  </a>
<a class="sourceLine" id="cb2-18" data-line-number="18">##  3rd Qu.: 73.25  </a>
<a class="sourceLine" id="cb2-19" data-line-number="19">##  Max.   :235.00  </a>
<a class="sourceLine" id="cb2-20" data-line-number="20">## dimension(s):</a>
<a class="sourceLine" id="cb2-21" data-line-number="21">##      from  to  offset delta                       refsys point values    </a>
<a class="sourceLine" id="cb2-22" data-line-number="22">## x       6 105  288776  28.5 +proj=utm +zone=25 +south... FALSE   NULL [x]</a>
<a class="sourceLine" id="cb2-23" data-line-number="23">## y       6 105 9120761 -28.5 +proj=utm +zone=25 +south... FALSE   NULL [y]</a>
<a class="sourceLine" id="cb2-24" data-line-number="24">## band    1   3      NA    NA                           NA    NA   NULL</a>
<a class="sourceLine" id="cb2-25" data-line-number="25"><span class="kw">dim</span>(x)</a>
<a class="sourceLine" id="cb2-26" data-line-number="26">##    x    y band </a>
<a class="sourceLine" id="cb2-27" data-line-number="27">##  100  100    3</a></code></pre></div>
<p>Compare this to</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="../reference/st_dimensions.html">st_dimensions</a></span>(<span class="kw"><a href="../reference/read_stars.html">read_stars</a></span>(tif))</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">##      from  to  offset delta                       refsys point values    </a>
<a class="sourceLine" id="cb3-3" data-line-number="3">## x       1 349  288776  28.5 +proj=utm +zone=25 +south... FALSE   NULL [x]</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">## y       1 352 9120761 -28.5 +proj=utm +zone=25 +south... FALSE   NULL [y]</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">## band    1   6      NA    NA                           NA    NA   NULL</a></code></pre></div>
<p>and we see that</p>
<ul>
<li>the <code>delta</code> values remain the same,</li>
<li>the offset (x/y coordinates of origing) of the grid remain the same</li>
<li>the <code>from</code> and <code>to</code> reflect the new area, and relate to the new <code>delta</code> values</li>
<li>
<code>dim(x)</code> reflects the new size, and</li>
<li>only three bands were read</li>
</ul>
</div>
<div id="reading-at-a-different-resolution" class="section level2">
<h2 class="hasAnchor">
<a href="#reading-at-a-different-resolution" class="anchor"></a>Reading at a different resolution</h2>
<p>Reading datasets at a lower (but also higher!) resolution can be done by setting <code>nBufXSize</code> and <code>nBufYSize</code></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">rasterio =<span class="st"> </span><span class="kw">list</span>(<span class="dt">nXOff =</span> <span class="dv">6</span>, <span class="dt">nYOff =</span> <span class="dv">6</span>, <span class="dt">nXSize =</span> <span class="dv">100</span>, <span class="dt">nYSize =</span> <span class="dv">100</span>,</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">   <span class="dt">nBufXSize =</span> <span class="dv">20</span>, <span class="dt">nBufYSize =</span> <span class="dv">20</span>, <span class="dt">bands =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">4</span>))</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">(<span class="dt">x =</span> <span class="kw"><a href="../reference/read_stars.html">read_stars</a></span>(tif, <span class="dt">RasterIO =</span> rasterio))</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">## stars object with 3 dimensions and 1 attribute</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">## attribute(s):</a>
<a class="sourceLine" id="cb4-6" data-line-number="6">##   L7_ETMs.tif    </a>
<a class="sourceLine" id="cb4-7" data-line-number="7">##  Min.   : 29.00  </a>
<a class="sourceLine" id="cb4-8" data-line-number="8">##  1st Qu.: 54.00  </a>
<a class="sourceLine" id="cb4-9" data-line-number="9">##  Median : 64.00  </a>
<a class="sourceLine" id="cb4-10" data-line-number="10">##  Mean   : 62.28  </a>
<a class="sourceLine" id="cb4-11" data-line-number="11">##  3rd Qu.: 73.00  </a>
<a class="sourceLine" id="cb4-12" data-line-number="12">##  Max.   :107.00  </a>
<a class="sourceLine" id="cb4-13" data-line-number="13">## dimension(s):</a>
<a class="sourceLine" id="cb4-14" data-line-number="14">##      from to  offset  delta                       refsys point values    </a>
<a class="sourceLine" id="cb4-15" data-line-number="15">## x       2 21  288776  142.5 +proj=utm +zone=25 +south... FALSE   NULL [x]</a>
<a class="sourceLine" id="cb4-16" data-line-number="16">## y       2 21 9120761 -142.5 +proj=utm +zone=25 +south... FALSE   NULL [y]</a>
<a class="sourceLine" id="cb4-17" data-line-number="17">## band    1  3      NA     NA                           NA    NA   NULL</a></code></pre></div>
<p>and we see that in addition:</p>
<ul>
<li>the <code>delta</code> (raster cell size) values have increased a factor 5, because <code>nBufXSize</code> and <code>nBufYSize</code> were set to values a factor 5 smaller than <code>nXSize</code> and <code>nYSize</code>
</li>
<li>the offset coordinates of the grid are still the same</li>
<li>the <code>from</code> and <code>to</code> reflect the new area, but relate to the new <code>delta</code> cell size values</li>
</ul>
<p>We can also read at higher resolution; here we read a 3 x 3 area and blow it up to 20 x 20:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">rasterio =<span class="st"> </span><span class="kw">list</span>(<span class="dt">nXOff =</span> <span class="dv">6</span>, <span class="dt">nYOff =</span> <span class="dv">6</span>, <span class="dt">nXSize =</span> <span class="dv">3</span>, <span class="dt">nYSize =</span> <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">   <span class="dt">nBufXSize =</span> <span class="dv">100</span>, <span class="dt">nBufYSize =</span> <span class="dv">100</span>, <span class="dt">bands =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">x =<span class="st"> </span><span class="kw"><a href="../reference/read_stars.html">read_stars</a></span>(tif, <span class="dt">RasterIO =</span> rasterio)</a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="kw">dim</span>(x)</a>
<a class="sourceLine" id="cb5-5" data-line-number="5">##   x   y </a>
<a class="sourceLine" id="cb5-6" data-line-number="6">## 100 100</a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="kw">plot</span>(x)</a></code></pre></div>
<p><img src="proxy_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>The reason we “see”" only three grid cells is that the default sampling method is “nearest neighbour”. We can modify this by</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">rasterio =<span class="st"> </span><span class="kw">list</span>(<span class="dt">nXOff =</span> <span class="dv">6</span>, <span class="dt">nYOff =</span> <span class="dv">6</span>, <span class="dt">nXSize =</span> <span class="dv">3</span>, <span class="dt">nYSize =</span> <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">   <span class="dt">nBufXSize =</span> <span class="dv">100</span>, <span class="dt">nBufYSize =</span> <span class="dv">100</span>, <span class="dt">bands =</span> <span class="dv">1</span>, <span class="dt">resample =</span> <span class="st">"cubic_spline"</span>)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">x =<span class="st"> </span><span class="kw"><a href="../reference/read_stars.html">read_stars</a></span>(tif, <span class="dt">RasterIO =</span> rasterio)</a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="kw">dim</span>(x)</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">##   x   y </a>
<a class="sourceLine" id="cb6-6" data-line-number="6">## 100 100</a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="kw">plot</span>(x)</a></code></pre></div>
<p><img src="proxy_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>The following methods are allowed for parameter <code>resample</code>:</p>
<table class="table">
<colgroup>
<col width="25%">
<col width="75%">
</colgroup>
<thead><tr class="header">
<th><code>resample</code></th>
<th>method used</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>nearest_neighbour</code></td>
<td>Nearest neighbour (default)</td>
</tr>
<tr class="even">
<td><code>bilinear</code></td>
<td>Bilinear (2x2 kernel)</td>
</tr>
<tr class="odd">
<td><code>cubic</code></td>
<td>Cubic Convolution Approximation (4x4 kernel)</td>
</tr>
<tr class="even">
<td><code>cubic_spline</code></td>
<td>Cubic B-Spline Approximation (4x4 kernel)</td>
</tr>
<tr class="odd">
<td><code>lanczos</code></td>
<td>Lanczos windowed sinc interpolation (6x6 kernel)</td>
</tr>
<tr class="even">
<td><code>average</code></td>
<td>Average</td>
</tr>
<tr class="odd">
<td><code>mode</code></td>
<td>Mode (selects the value which appears most often of all the sampled points)</td>
</tr>
<tr class="even">
<td><code>Gauss</code></td>
<td>Gauss blurring</td>
</tr>
</tbody>
</table>
<p>All these methods are implemented in GDAL; for what these methods exactly do, we refer to the GDAL documentation or source code.</p>
</div>
</div>
<div id="stars-proxy-objects" class="section level1">
<h1 class="hasAnchor">
<a href="#stars-proxy-objects" class="anchor"></a>Stars proxy objects</h1>
<p>Stars proxy objects take another approach: upon creation they contain no data at all, but only pointers to where the data can be read. Data is only read when it is needed, and only as much as is needed: if we plot a proxy objects, the data are read at the resolution of pixels on the screen, rather than at the native resolution, so that if we have e.g. a 10000 x 10000 Sentinel 2 (level 1C) image, we can open it by</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">granule =<span class="st"> </span><span class="kw">system.file</span>(<span class="st">"sentinel/S2A_MSIL1C_20180220T105051_N0206_R051_T32ULE_20180221T134037.zip"</span>, <span class="dt">package =</span> <span class="st">"starsdata"</span>)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">s2 =<span class="st"> </span><span class="kw">paste0</span>(<span class="st">"SENTINEL2_L1C:/vsizip/"</span>, granule, <span class="st">"/S2A_MSIL1C_20180220T105051_N0206_R051_T32ULE_20180221T134037.SAFE/MTD_MSIL1C.xml:10m:EPSG_32632"</span>)</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">(<span class="dt">p =</span> <span class="kw"><a href="../reference/read_stars.html">read_stars</a></span>(s2, <span class="dt">proxy =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">## stars_proxy object with 1 attribute in file:</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">## $`MTD_MSIL1C.xml:10m:EPSG_32632`</a>
<a class="sourceLine" id="cb7-6" data-line-number="6">## [1] "SENTINEL2_L1C:/vsizip//home/travis/R/Library/starsdata/sentinel/S2A_MSIL1C_20180220T105051_N0206_R051_T32ULE_20180221T134037.zip/S2A_MSIL1C_20180220T105051_N0206_R051_T32ULE_20180221T134037.SAFE/MTD_MSIL1C.xml:10m:EPSG_32632"</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">## </a>
<a class="sourceLine" id="cb7-8" data-line-number="8">## dimension(s):</a>
<a class="sourceLine" id="cb7-9" data-line-number="9">##      from    to offset delta                       refsys point values    </a>
<a class="sourceLine" id="cb7-10" data-line-number="10">## x       1 10980  3e+05    10 +proj=utm +zone=32 +datum...    NA   NULL [x]</a>
<a class="sourceLine" id="cb7-11" data-line-number="11">## y       1 10980  6e+06   -10 +proj=utm +zone=32 +datum...    NA   NULL [y]</a>
<a class="sourceLine" id="cb7-12" data-line-number="12">## band    1     4     NA    NA                           NA    NA   NULL</a></code></pre></div>
<p>and this happens <em>instantly</em>, because no data is read. When we plot this object,</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw">system.time</span>(<span class="kw">plot</span>(p))</a></code></pre></div>
<p><img src="proxy_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<pre><code>##    user  system elapsed 
##   2.244   0.908   2.154</code></pre>
<p>This takes only around 1 second, since only those pixels are read that can be seen on the plot. If we read the entire image in memory first, as we would do with</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">p =<span class="st"> </span><span class="kw"><a href="../reference/read_stars.html">read_stars</a></span>(s2, <span class="dt">proxy =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<p>then only the reading would take over a minute, and require 5 Gb memory.</p>
<div id="methods-for-stars-proxy-objects" class="section level2">
<h2 class="hasAnchor">
<a href="#methods-for-stars-proxy-objects" class="anchor"></a>Methods for stars proxy objects</h2>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw">methods</span>(<span class="dt">class =</span> <span class="st">"stars_proxy"</span>)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2">## [1] [           adrop       c           dim         plot        print      </a>
<a class="sourceLine" id="cb11-3" data-line-number="3">## [7] st_apply    st_as_stars st_crop    </a>
<a class="sourceLine" id="cb11-4" data-line-number="4">## see '?methods' for accessing help and source code</a></code></pre></div>
</div>
<div id="select-attributes" class="section level2">
<h2 class="hasAnchor">
<a href="#select-attributes" class="anchor"></a>Select attributes</h2>
<p>We can select attributes as with regular <code>stars</code> objects, by using the first argument to <code>[</code>:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">x =<span class="st"> </span><span class="kw">c</span>(<span class="st">"avhrr-only-v2.19810901.nc"</span>,</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="st">"avhrr-only-v2.19810902.nc"</span>,</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="st">"avhrr-only-v2.19810903.nc"</span>,</a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="st">"avhrr-only-v2.19810904.nc"</span>,</a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="st">"avhrr-only-v2.19810905.nc"</span>,</a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="st">"avhrr-only-v2.19810906.nc"</span>,</a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="st">"avhrr-only-v2.19810907.nc"</span>,</a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="st">"avhrr-only-v2.19810908.nc"</span>,</a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="st">"avhrr-only-v2.19810909.nc"</span>)</a>
<a class="sourceLine" id="cb12-10" data-line-number="10">file_list =<span class="st"> </span><span class="kw">system.file</span>(<span class="kw">paste0</span>(<span class="st">"netcdf/"</span>, x), <span class="dt">package =</span> <span class="st">"starsdata"</span>)</a>
<a class="sourceLine" id="cb12-11" data-line-number="11">y =<span class="st"> </span><span class="kw"><a href="../reference/read_stars.html">read_stars</a></span>(file_list, <span class="dt">quiet =</span> <span class="ot">TRUE</span>, <span class="dt">proxy =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb12-12" data-line-number="12"><span class="kw">names</span>(y)</a>
<a class="sourceLine" id="cb12-13" data-line-number="13">## [1] "sst"  "anom" "err"  "ice"</a>
<a class="sourceLine" id="cb12-14" data-line-number="14">y[<span class="st">"sst"</span>]</a>
<a class="sourceLine" id="cb12-15" data-line-number="15">## stars_proxy object with 1 attribute in file:</a>
<a class="sourceLine" id="cb12-16" data-line-number="16">## $sst</a>
<a class="sourceLine" id="cb12-17" data-line-number="17">## [1] "NETCDF:\"/home/travis/R/Library/starsdata/netcdf/avhrr-only-v2.19810901.nc\":sst"</a>
<a class="sourceLine" id="cb12-18" data-line-number="18">## [2] "NETCDF:\"/home/travis/R/Library/starsdata/netcdf/avhrr-only-v2.19810902.nc\":sst"</a>
<a class="sourceLine" id="cb12-19" data-line-number="19">## [3] "NETCDF:\"/home/travis/R/Library/starsdata/netcdf/avhrr-only-v2.19810903.nc\":sst"</a>
<a class="sourceLine" id="cb12-20" data-line-number="20">## [4] "NETCDF:\"/home/travis/R/Library/starsdata/netcdf/avhrr-only-v2.19810904.nc\":sst"</a>
<a class="sourceLine" id="cb12-21" data-line-number="21">## [5] "NETCDF:\"/home/travis/R/Library/starsdata/netcdf/avhrr-only-v2.19810905.nc\":sst"</a>
<a class="sourceLine" id="cb12-22" data-line-number="22">## [6] "NETCDF:\"/home/travis/R/Library/starsdata/netcdf/avhrr-only-v2.19810906.nc\":sst"</a>
<a class="sourceLine" id="cb12-23" data-line-number="23">## [7] "NETCDF:\"/home/travis/R/Library/starsdata/netcdf/avhrr-only-v2.19810907.nc\":sst"</a>
<a class="sourceLine" id="cb12-24" data-line-number="24">## [8] "NETCDF:\"/home/travis/R/Library/starsdata/netcdf/avhrr-only-v2.19810908.nc\":sst"</a>
<a class="sourceLine" id="cb12-25" data-line-number="25">## [9] "NETCDF:\"/home/travis/R/Library/starsdata/netcdf/avhrr-only-v2.19810909.nc\":sst"</a>
<a class="sourceLine" id="cb12-26" data-line-number="26">## </a>
<a class="sourceLine" id="cb12-27" data-line-number="27">## dimension(s):</a>
<a class="sourceLine" id="cb12-28" data-line-number="28">##      from   to     offset  delta  refsys point values    </a>
<a class="sourceLine" id="cb12-29" data-line-number="29">## x       1 1440          0   0.25      NA    NA   NULL [x]</a>
<a class="sourceLine" id="cb12-30" data-line-number="30">## y       1  720         90  -0.25      NA    NA   NULL [y]</a>
<a class="sourceLine" id="cb12-31" data-line-number="31">## zlev    1    1      0 [m]     NA      NA    NA   NULL    </a>
<a class="sourceLine" id="cb12-32" data-line-number="32">## time    1    9 1981-09-01 1 days POSIXct    NA   NULL</a></code></pre></div>
<p>Note that this selection limits the reading from 4 to 1 subdataset from all 9 NetCDF files.</p>
</div>
<div id="select-an-area" class="section level2">
<h2 class="hasAnchor">
<a href="#select-an-area" class="anchor"></a>Select an area</h2>
<p>Another possibility is to crop, or select a rectangular region based on a spatial object. This can be done by passing a <code>bbox</code> object, or an <code>sf</code>, <code>sfc</code> or <code>stars</code> object from which the bounding box will be taken. An example:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">bb =<span class="st"> </span><span class="kw">st_bbox</span>(<span class="kw">c</span>(<span class="dt">xmin =</span> <span class="fl">10.125</span>, <span class="dt">ymin =</span> <span class="fl">0.125</span>, <span class="dt">xmax =</span> <span class="fl">70.125</span>, <span class="dt">ymax =</span> <span class="fl">70.125</span>))</a>
<a class="sourceLine" id="cb13-2" data-line-number="2">ysub =<span class="st"> </span>y[bb]</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="kw"><a href="../reference/st_dimensions.html">st_dimensions</a></span>(ysub)</a>
<a class="sourceLine" id="cb13-4" data-line-number="4">##      from  to     offset  delta  refsys point values    </a>
<a class="sourceLine" id="cb13-5" data-line-number="5">## x      41 281          0   0.25      NA    NA   NULL [x]</a>
<a class="sourceLine" id="cb13-6" data-line-number="6">## y      80 360         90  -0.25      NA    NA   NULL [y]</a>
<a class="sourceLine" id="cb13-7" data-line-number="7">## zlev    1   1      0 [m]     NA      NA    NA   NULL    </a>
<a class="sourceLine" id="cb13-8" data-line-number="8">## time    1   9 1981-09-01 1 days POSIXct    NA   NULL</a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="kw">class</span>(ysub) <span class="co"># still no data here!!</span></a>
<a class="sourceLine" id="cb13-10" data-line-number="10">## [1] "stars_proxy" "stars"</a>
<a class="sourceLine" id="cb13-11" data-line-number="11"><span class="kw">plot</span>(ysub, <span class="dt">reset =</span> <span class="ot">FALSE</span>) <span class="co"># plot reads the data, at resolution that is relevant</span></a>
<a class="sourceLine" id="cb13-12" data-line-number="12">## Warning: ignoring unrecognized unit: percentage</a>
<a class="sourceLine" id="cb13-13" data-line-number="13"></a>
<a class="sourceLine" id="cb13-14" data-line-number="14">## Warning: ignoring unrecognized unit: percentage</a>
<a class="sourceLine" id="cb13-15" data-line-number="15"></a>
<a class="sourceLine" id="cb13-16" data-line-number="16">## Warning: ignoring unrecognized unit: percentage</a>
<a class="sourceLine" id="cb13-17" data-line-number="17"></a>
<a class="sourceLine" id="cb13-18" data-line-number="18">## Warning: ignoring unrecognized unit: percentage</a>
<a class="sourceLine" id="cb13-19" data-line-number="19"></a>
<a class="sourceLine" id="cb13-20" data-line-number="20">## Warning: ignoring unrecognized unit: percentage</a>
<a class="sourceLine" id="cb13-21" data-line-number="21"></a>
<a class="sourceLine" id="cb13-22" data-line-number="22">## Warning: ignoring unrecognized unit: percentage</a>
<a class="sourceLine" id="cb13-23" data-line-number="23"></a>
<a class="sourceLine" id="cb13-24" data-line-number="24">## Warning: ignoring unrecognized unit: percentage</a>
<a class="sourceLine" id="cb13-25" data-line-number="25"></a>
<a class="sourceLine" id="cb13-26" data-line-number="26">## Warning: ignoring unrecognized unit: percentage</a>
<a class="sourceLine" id="cb13-27" data-line-number="27"></a>
<a class="sourceLine" id="cb13-28" data-line-number="28">## Warning: ignoring unrecognized unit: percentage</a>
<a class="sourceLine" id="cb13-29" data-line-number="29"><span class="kw">plot</span>(<span class="kw">st_as_sfc</span>(bb), <span class="dt">add =</span> <span class="ot">TRUE</span>, <span class="dt">lwd =</span> <span class="fl">.5</span>, <span class="dt">border =</span> <span class="st">'red'</span>)</a></code></pre></div>
<p><img src="proxy_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
</div>
<div id="lazy-evaluation-changing-evaluation-order" class="section level2">
<h2 class="hasAnchor">
<a href="#lazy-evaluation-changing-evaluation-order" class="anchor"></a>Lazy evaluation, changing evaluation order</h2>
<p>Some other actions can be carried out on <code>stars_proxy</code> objects, but their effect is delayed until the data are actually needed (plot, write). For instance, range selections on dimensions other than shown above first need data, and can only then be carried out. Such functions are added to the object, in an attribute called <code>call_list</code>:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">yy =<span class="st"> </span><span class="kw">adrop</span>(y)</a>
<a class="sourceLine" id="cb14-2" data-line-number="2">yyy =<span class="st"> </span>yy[,<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>,]</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="kw">class</span>(yyy) <span class="co"># still no data</span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4">## [1] "stars_proxy" "stars"</a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="kw"><a href="../reference/st_dimensions.html">st_dimensions</a></span>(yyy) <span class="co"># and dimensions not adjusted</span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6">##      from   to     offset  delta  refsys point values    </a>
<a class="sourceLine" id="cb14-7" data-line-number="7">## x       1 1440          0   0.25      NA    NA   NULL [x]</a>
<a class="sourceLine" id="cb14-8" data-line-number="8">## y       1  720         90  -0.25      NA    NA   NULL [y]</a>
<a class="sourceLine" id="cb14-9" data-line-number="9">## zlev    1    1      0 [m]     NA      NA    NA   NULL    </a>
<a class="sourceLine" id="cb14-10" data-line-number="10">## time    1    9 1981-09-01 1 days POSIXct    NA   NULL</a>
<a class="sourceLine" id="cb14-11" data-line-number="11"><span class="kw">attr</span>(yyy, <span class="st">"call_list"</span>) <span class="co"># the name of object in the call (y) is replaced with x:</span></a>
<a class="sourceLine" id="cb14-12" data-line-number="12">## [[1]]</a>
<a class="sourceLine" id="cb14-13" data-line-number="13">## adrop(x = x)</a>
<a class="sourceLine" id="cb14-14" data-line-number="14">## </a>
<a class="sourceLine" id="cb14-15" data-line-number="15">## [[2]]</a>
<a class="sourceLine" id="cb14-16" data-line-number="16">## x[, 1:10, 1:10, ]</a></code></pre></div>
<p>Doing this allows for optimizating the order in which operations are done. As an example, for <code>st_apply</code>, reading can be done sequential over the dimensions over which the function is applied:</p>
<ul>
<li>If for example a function is applied to each band (such as: compute band quantiles), bands can be read sequentially, and discarded after the quantiles have been computed.</li>
<li>If a time series function is applied to pixel time series and the result is plotted on a map, the time series function has only to be evaluated on the pixels actually plotted. This means that in</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw">plot</span>(<span class="kw"><a href="../reference/st_apply.html">st_apply</a></span>(x, <span class="kw">c</span>(<span class="st">"x"</span>, <span class="st">"y"</span>), range))</a></code></pre></div>
<p>the order of evaluation needs to be reversed: only <code>plot</code> knows which pixels are going to be shown, so that should be in control of how <code>x</code> is subsampled <em>before</em> <code>st_apply</code> is carried out on this subsample.</p>
<div id="fetching-the-data" class="section level3">
<h3 class="hasAnchor">
<a href="#fetching-the-data" class="anchor"></a>Fetching the data</h3>
<p>Fetching the data now involves reading the whole array and then evaluating the <code>call_list</code> on it, sequentially:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">(<span class="dt">x =</span> <span class="kw"><a href="../reference/st_as_stars.html">st_as_stars</a></span>(yyy)) <span class="co"># read, adrop, subset</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2">## Warning: ignoring unrecognized unit: percentage</a>
<a class="sourceLine" id="cb16-3" data-line-number="3"></a>
<a class="sourceLine" id="cb16-4" data-line-number="4">## Warning: ignoring unrecognized unit: percentage</a>
<a class="sourceLine" id="cb16-5" data-line-number="5"></a>
<a class="sourceLine" id="cb16-6" data-line-number="6">## Warning: ignoring unrecognized unit: percentage</a>
<a class="sourceLine" id="cb16-7" data-line-number="7"></a>
<a class="sourceLine" id="cb16-8" data-line-number="8">## Warning: ignoring unrecognized unit: percentage</a>
<a class="sourceLine" id="cb16-9" data-line-number="9"></a>
<a class="sourceLine" id="cb16-10" data-line-number="10">## Warning: ignoring unrecognized unit: percentage</a>
<a class="sourceLine" id="cb16-11" data-line-number="11"></a>
<a class="sourceLine" id="cb16-12" data-line-number="12">## Warning: ignoring unrecognized unit: percentage</a>
<a class="sourceLine" id="cb16-13" data-line-number="13"></a>
<a class="sourceLine" id="cb16-14" data-line-number="14">## Warning: ignoring unrecognized unit: percentage</a>
<a class="sourceLine" id="cb16-15" data-line-number="15"></a>
<a class="sourceLine" id="cb16-16" data-line-number="16">## Warning: ignoring unrecognized unit: percentage</a>
<a class="sourceLine" id="cb16-17" data-line-number="17"></a>
<a class="sourceLine" id="cb16-18" data-line-number="18">## Warning: ignoring unrecognized unit: percentage</a>
<a class="sourceLine" id="cb16-19" data-line-number="19">## stars object with 3 dimensions and 4 attributes</a>
<a class="sourceLine" id="cb16-20" data-line-number="20">## attribute(s):</a>
<a class="sourceLine" id="cb16-21" data-line-number="21">##    sst [°*C]        anom [°*C]      err [°*C]        ice        </a>
<a class="sourceLine" id="cb16-22" data-line-number="22">##  Min.   :-1.280   Min.   :0.480   Min.   :0.3   Min.   :0.7600  </a>
<a class="sourceLine" id="cb16-23" data-line-number="23">##  1st Qu.:-1.170   1st Qu.:0.620   1st Qu.:0.3   1st Qu.:0.7900  </a>
<a class="sourceLine" id="cb16-24" data-line-number="24">##  Median :-1.110   Median :0.690   Median :0.3   Median :0.8100  </a>
<a class="sourceLine" id="cb16-25" data-line-number="25">##  Mean   :-1.116   Mean   :0.665   Mean   :0.3   Mean   :0.8063  </a>
<a class="sourceLine" id="cb16-26" data-line-number="26">##  3rd Qu.:-1.060   3rd Qu.:0.720   3rd Qu.:0.3   3rd Qu.:0.8200  </a>
<a class="sourceLine" id="cb16-27" data-line-number="27">##  Max.   :-0.950   Max.   :0.770   Max.   :0.3   Max.   :0.8500  </a>
<a class="sourceLine" id="cb16-28" data-line-number="28">## dimension(s):</a>
<a class="sourceLine" id="cb16-29" data-line-number="29">##      from to     offset  delta  refsys point values    </a>
<a class="sourceLine" id="cb16-30" data-line-number="30">## x       1 10          0   0.25      NA    NA   NULL [x]</a>
<a class="sourceLine" id="cb16-31" data-line-number="31">## y       1 10         90  -0.25      NA    NA   NULL [y]</a>
<a class="sourceLine" id="cb16-32" data-line-number="32">## time    1  9 1981-09-01 1 days POSIXct    NA   NULL</a></code></pre></div>
</div>
<div id="plotting-with-changed-evaluation-order" class="section level3">
<h3 class="hasAnchor">
<a href="#plotting-with-changed-evaluation-order" class="anchor"></a>Plotting with changed evaluation order</h3>
<p>For the sentinel 2 data, band 4 represents NIR and band 1 red, so we can compute NDVI by</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="co"># S2 10m: band 4: near infrared, band 1: red.</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2">ndvi =<span class="st"> </span><span class="cf">function</span>(x) (x[<span class="dv">4</span>]<span class="op">-</span>x[<span class="dv">1</span>])<span class="op">/</span>(x[<span class="dv">4</span>] <span class="op">+</span><span class="st"> </span>x[<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="kw">rm</span>(x)</a>
<a class="sourceLine" id="cb17-4" data-line-number="4">(<span class="dt">s2.ndvi =</span> <span class="kw"><a href="../reference/st_apply.html">st_apply</a></span>(p, <span class="kw">c</span>(<span class="st">"x"</span>, <span class="st">"y"</span>), ndvi))</a>
<a class="sourceLine" id="cb17-5" data-line-number="5">## stars_proxy object with 1 attribute in file:</a>
<a class="sourceLine" id="cb17-6" data-line-number="6">## $`MTD_MSIL1C.xml:10m:EPSG_32632`</a>
<a class="sourceLine" id="cb17-7" data-line-number="7">## [1] "SENTINEL2_L1C:/vsizip//home/travis/R/Library/starsdata/sentinel/S2A_MSIL1C_20180220T105051_N0206_R051_T32ULE_20180221T134037.zip/S2A_MSIL1C_20180220T105051_N0206_R051_T32ULE_20180221T134037.SAFE/MTD_MSIL1C.xml:10m:EPSG_32632"</a>
<a class="sourceLine" id="cb17-8" data-line-number="8">## </a>
<a class="sourceLine" id="cb17-9" data-line-number="9">## dimension(s):</a>
<a class="sourceLine" id="cb17-10" data-line-number="10">##      from    to offset delta                       refsys point values    </a>
<a class="sourceLine" id="cb17-11" data-line-number="11">## x       1 10980  3e+05    10 +proj=utm +zone=32 +datum...    NA   NULL [x]</a>
<a class="sourceLine" id="cb17-12" data-line-number="12">## y       1 10980  6e+06   -10 +proj=utm +zone=32 +datum...    NA   NULL [y]</a>
<a class="sourceLine" id="cb17-13" data-line-number="13">## band    1     4     NA    NA                           NA    NA   NULL    </a>
<a class="sourceLine" id="cb17-14" data-line-number="14">## call list:</a>
<a class="sourceLine" id="cb17-15" data-line-number="15">## [[1]]</a>
<a class="sourceLine" id="cb17-16" data-line-number="16">## st_apply(X = X, MARGIN = c("x", "y"), FUN = ndvi)</a>
<a class="sourceLine" id="cb17-17" data-line-number="17"><span class="kw">system.time</span>(<span class="kw">plot</span>(s2.ndvi)) <span class="co"># read - compute ndvi - plot </span></a>
<a class="sourceLine" id="cb17-18" data-line-number="18">## Warning in st_as_stars.stars_proxy(x, downsample = downsample): deferred</a>
<a class="sourceLine" id="cb17-19" data-line-number="19">## processes applied to downsampled image(s)</a></code></pre></div>
<p><img src="proxy_files/figure-html/unnamed-chunk-16-1.png" width="700"></p>
<pre><code>##    user  system elapsed 
##   2.016   0.852   1.896</code></pre>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#preamble-the-starsdata-package">Preamble: the starsdata package</a></li>
      <li>
<a href="#reading-chunks-change-resolution-select-bands">Reading chunks, change resolution, select bands</a><ul class="nav nav-pills nav-stacked">
<li><a href="#reading-a-particular-chunk">Reading a particular chunk</a></li>
      <li><a href="#reading-at-a-different-resolution">Reading at a different resolution</a></li>
      </ul>
</li>
      <li>
<a href="#stars-proxy-objects">Stars proxy objects</a><ul class="nav nav-pills nav-stacked">
<li><a href="#methods-for-stars-proxy-objects">Methods for stars proxy objects</a></li>
      <li><a href="#select-attributes">Select attributes</a></li>
      <li><a href="#select-an-area">Select an area</a></li>
      <li><a href="#lazy-evaluation-changing-evaluation-order">Lazy evaluation, changing evaluation order</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Edzer Pebesma.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
